<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>pnsi.rb</title>
  <link href="https://designsystem.parliament.uk/css/main.css" rel="stylesheet">
  <style>
  .line-number {
    display: inline-block;
    width: 40px;
    text-align: right;
    margin-right: 10px;
  }
  pre {
    margin-bottom: 0;
    padding: 3px;
  }
  code {
    white-space: pre;
  }
</style>

</head>
<body>
<header class="doc-header">
  <div class="container">
      <a href="https://www.parliament.uk" class="parliament-home" aria-label="UK Parliament home">
          <svg aria-hidden="true" width="159" height="40" viewBox="0 0 159 40" fill="#fff" xmlns="http://www.w3.org/2000/svg">
              <use href="#p-icon__uk-parliament"/>
          </svg>
      </a>
  </div>
  <div class="product-header">
      <div class="container">
          <a class="title" href="/">
                  pnsi.rb
                </a>
      </div>
  </div>
</header>

<main id="main" class="main-content">
  <div class="doc-wrapper">
      <div class="container">
          <div class="row">
            <div class="col-lg-3">
              <h3>Files</h3>
<ul class='list-unstyled'>
<li><a href='index.html'>Index</a></li>
<li><a href='bicameral_both_houses_sitting.html' class=''>bicameral_both_houses_sitting.rb</a></li>
<li><a href='bicameral_si_either_house_sitting.html' class=''>bicameral_si_either_house_sitting.rb</a></li>
<li><a href='commons_only_si.html' class=''>commons_only_si.rb</a></li>
<li><a href='commons_only_sitting_days.html' class=''>commons_only_sitting_days.rb</a></li>
<li><a href='interval.html' class=''>interval.rb</a></li>
<li><a href='pnsi.html' class='fw-bold text-primary'>pnsi.rb</a></li>
<li><a href='treaty.html' class=''>treaty.rb</a></li>
</ul>
            </div>
              <div class="col-lg-9">
                <h1>pnsi.rb</h1>
                <p>
                  <small class="text-muted">
                    View full file: 
                    <a href="https://github.com//blob/main/app/lib/calculations/pnsi.rb" target="_blank">
                      on GitHub
                    </a>
                  </small>
                </p>
                <hr>
                <div class="text-secondary">
                  <pre><code><span class='line-number'><span class='text-secondary pe-2'>1</span></span>module Calculations</code></pre>
<pre><code><span class='line-number'><span class='text-secondary pe-2'>2</span></span>  module Pnsi</code></pre>
<h1>A method for calculating the end date of committee scrutiny periods for Proposed Negative Statutory Instruments (PNSIs).</h1>

<p>The calculation counts in parliamentary sitting days, requiring the laying date and the number of days to count.</p>

<p>The calculation is defined by the <a href="https://www.legislation.gov.uk/ukpga/2018/16/schedule/7/enacted#schedule-7-paragraph-17-10">European Union (Withdrawal) Act 2018 schedule 7 paragraph 17(10)</a> (number of days to count) and <a href="https://www.legislation.gov.uk/ukpga/2018/16/schedule/7/enacted#schedule-7-paragraph-17-11">paragraph 17(11)</a> (definition of sitting day).</p>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>7</span></span>    def pnsi_calculation( date, target_day_count )</code></pre>
<h2>We start counting on the <strong>first joint parliamentary sitting day following the laying of the instrument</strong>.</h2>

<p>If the date of laying is a joint parliamentary sitting day, we do not count that day.</p>

<p>If we find a day meeting that criteria ...</p>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>12</span></span>      if date.next_day.first_joint_parliamentary_sitting_day</code></pre>
<p>... we set the date to start counting from as that day.</p>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>15</span></span>        date = date.next_day.first_joint_parliamentary_sitting_day</code></pre>
<p>... we have found the start of the scrutiny period.</p>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>18</span></span>        @scrutiny_start_date = date</code></pre>
<p>PNSIs are always before both Houses, so we&#39;ll get ready to start counting the sitting days in each House.</p>

<p>The first joint sitting day counts as day 1 in both Houses, so we count from 1 rather than from 0.</p>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>22</span></span>      	commons_day_count = 1</code></pre>
<pre><code><span class='line-number'><span class='text-secondary pe-2'>23</span></span>        lords_day_count = 1</code></pre>
<h2>We look at subsequent days, ensuring that we&#39;ve counted at least ten parliamentary sitting days in each House ...</h2>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>26</span></span>        until ( ( commons_day_count &gt;= target_day_count ) and ( lords_day_count &gt;= target_day_count ) ) do</code></pre>
<p>... continue to the <strong>next day</strong>.</p>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>29</span></span>          date = date.next_day</code></pre>
<p>PNSIs use parliamentary sitting days, rather than naive sitting days.</p>

<p>If the Lords sat on the date we&#39;ve found, we add another day to the Lords’ count.</p>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>33</span></span>          lords_day_count +=1 if date.is_lords_parliamentary_sitting_day?</code></pre>
<p>If the Commons sat on the date we&#39;ve found, we add another day to the Commons’ count.</p>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>35</span></span>          commons_day_count+=1 if date.is_commons_parliamentary_sitting_day?</code></pre>
<p>If the calendar has no record of what type of day this is, we can&#39;t calculate the end date, ...</p>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>38</span></span>          if date.is_calendar_not_populated?</code></pre>
<p>... this error message is displayed to users ...</p>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>41</span></span>            @error_message = &quot;It&#39;s not currently possible to calculate an anticipated end date, as the likely end date occurs during a period for which sitting days are yet to be announced.&quot;</code></pre>
<p>... and we stop looking through the calendar.</p>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>44</span></span>            break</code></pre>
<pre><code><span class='line-number'><span class='text-secondary pe-2'>45</span></span>          end</code></pre>
<pre><code><span class='line-number'><span class='text-secondary pe-2'>46</span></span>        end</code></pre>
<p>If we didn&#39;t find any <strong>future joint sitting date</strong> in our calendar, we can&#39;t calculate the scrutiny period ...</p>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>49</span></span>      else</code></pre>
<p>... and this error message is displayed.</p>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>52</span></span>        @error_message = &quot;Unable to find a future joint sitting day. It&#39;s not currently possible to calculate an anticipated end date, as the likely end date occurs during a period for which sitting days are yet to be announced.&quot;</code></pre>
<pre><code><span class='line-number'><span class='text-secondary pe-2'>53</span></span>      end</code></pre>
<p>Return the anticipated end date of the scrutiny period for display.</p>

<pre><code><span class='line-number'><span class='text-secondary pe-2'>56</span></span>      date</code></pre>
<pre><code><span class='line-number'><span class='text-secondary pe-2'>57</span></span>    end</code></pre>
<pre><code><span class='line-number'><span class='text-secondary pe-2'>58</span></span>  end</code></pre>
<pre><code><span class='line-number'><span class='text-secondary pe-2'>59</span></span>end</code></pre>
                </div>
                <hr>
                <p class="text-muted">Generated on: 2025-05-27 16:16:05</p>
              </div>
            </div>
          </div>
        </div>
    </main>
    <footer>
  <div class="container">
      <div class="row">
          <div class="col-md-3 col-no-spacing primary">
                  &copy; UK Parliament 2025
                </div>
          <div class="col-md-9 secondary">
              <a href="https://www.parliament.uk/site-information/privacy/">Cookie policy</a>
              <a data-cookie-manager-open="" href="#">Cookie settings</a>
              <a href="https://www.parliament.uk/site-information/data-protection/data-protection-and-privacy-policy/">Privacy notice</a>
              <a href="https://www.parliament.uk/site-information/accessibility/">Accessibility statement</a>
              <a href="https://www.parliament.uk/site-information/copyright-parliament/">Copyright policy</a>
          </div>
      </div>
  </div>
</footer>
</body>
</html>
