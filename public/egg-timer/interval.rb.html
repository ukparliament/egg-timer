<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="alternate" type="text/markdown" href="interval.rb.md">
    <style>
      body {
        max-width: 40rem;
        margin: auto;
        padding: 2rem 1rem;
        font-family: 'Helvetica Neue','Helvetica', system-ui;
        color: black;
        background-color: white;
      }
      p {line-height: 1.4;}
      code {
      line-height: 1.4;
      color:gray;
      }
      code pre {white-space: pre-wrap; word-break: break-word;}
      code:hover {color:black;}
      h1, h2 {font-weight:normal;}
      a {text-decoration:none;}
      a.githubline {color:gray;font-weight:bold;}
      @media (prefers-color-scheme: dark) {
body {color:white;background-color:black;}
a {text-decoration:underline;color:white;}
}
    </style>
    <title>lib/calculations/interval.rb</title>
  </head>
  <body><code title='Line 1, lib/calculations/interval.rb'><pre><a name='1'  class='githubline' href='https://github.com/ukparliament/egg-timer/tree/master/lib/calculations/interval.rb#L1'> 1</a> module CALCULATION_INTERVAL
</pre></code><h1>A method for calculating the number of sitting days in both Houses during an interval.</h1>
<p>We pass the start and end dates of the interval.</p>
<code title='Line 6, lib/calculations/interval.rb'><pre><a name='6'  class='githubline' href='https://github.com/ukparliament/egg-timer/tree/master/lib/calculations/interval.rb#L6'> 6</a>   def calculate_sitting_days_in_interval( start_date, end_date )
</pre></code><p>We set the date to start counting from to the start date.</p>
<code title='Line 9, lib/calculations/interval.rb'><pre><a name='9'  class='githubline' href='https://github.com/ukparliament/egg-timer/tree/master/lib/calculations/interval.rb#L9'> 9</a>     date = @start_date
</pre></code><p>Whilst the date is not later than the end date ...</p>
<code title='Line 12, lib/calculations/interval.rb'><pre><a name='12'  class='githubline' href='https://github.com/ukparliament/egg-timer/tree/master/lib/calculations/interval.rb#L12'> 12</a>     while date <= @end_date
</pre></code><p>If the date is a Commons sitting day ...</p>
<code title='Line 15, lib/calculations/interval.rb'><pre><a name='15'  class='githubline' href='https://github.com/ukparliament/egg-timer/tree/master/lib/calculations/interval.rb#L15'> 15</a>       if date.is_commons_actual_sitting_day?
</pre></code><p>... we increment the Commons sitting day count.</p>
<code title='Line 18, lib/calculations/interval.rb'><pre><a name='18'  class='githubline' href='https://github.com/ukparliament/egg-timer/tree/master/lib/calculations/interval.rb#L18'> 18</a>         @commons_sitting_day_count += 1
</pre></code><code title='Line 19, lib/calculations/interval.rb'><pre><a name='19'  class='githubline' href='https://github.com/ukparliament/egg-timer/tree/master/lib/calculations/interval.rb#L19'> 19</a>       end
</pre></code><p>If the date is a Lords sitting day ...</p>
<code title='Line 22, lib/calculations/interval.rb'><pre><a name='22'  class='githubline' href='https://github.com/ukparliament/egg-timer/tree/master/lib/calculations/interval.rb#L22'> 22</a>       if date.is_lords_actual_sitting_day?
</pre></code><p>... we increment the Lords sitting day count.</p>
<code title='Line 25, lib/calculations/interval.rb'><pre><a name='25'  class='githubline' href='https://github.com/ukparliament/egg-timer/tree/master/lib/calculations/interval.rb#L25'> 25</a>         @lords_sitting_day_count += 1
</pre></code><code title='Line 26, lib/calculations/interval.rb'><pre><a name='26'  class='githubline' href='https://github.com/ukparliament/egg-timer/tree/master/lib/calculations/interval.rb#L26'> 26</a>       end
</pre></code><p>We continue to the <strong>next day</strong>.</p>
<code title='Line 29, lib/calculations/interval.rb'><pre><a name='29'  class='githubline' href='https://github.com/ukparliament/egg-timer/tree/master/lib/calculations/interval.rb#L29'> 29</a>       date = date.next_day
</pre></code><code title='Line 30, lib/calculations/interval.rb'><pre><a name='30'  class='githubline' href='https://github.com/ukparliament/egg-timer/tree/master/lib/calculations/interval.rb#L30'> 30</a>     end
</pre></code><code title='Line 31, lib/calculations/interval.rb'><pre><a name='31'  class='githubline' href='https://github.com/ukparliament/egg-timer/tree/master/lib/calculations/interval.rb#L31'> 31</a>   end
</pre></code><code title='Line 32, lib/calculations/interval.rb'><pre><a name='32'  class='githubline' href='https://github.com/ukparliament/egg-timer/tree/master/lib/calculations/interval.rb#L32'> 32</a> end</pre></code></body></html>